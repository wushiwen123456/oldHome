(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/login/login"],{"3bad":function(t,e,o){"use strict";o.r(e);var a=o("75ea"),n=o.n(a);for(var s in a)"default"!==s&&function(t){o.d(e,t,function(){return a[t]})}(s);e["default"]=n.a},"5a0e":function(t,e,o){"use strict";var a,n=function(){var t=this,e=t.$createElement;t._self._c},s=[];o.d(e,"b",function(){return n}),o.d(e,"c",function(){return s}),o.d(e,"a",function(){return a})},"5bb0":function(t,e,o){"use strict";var a=o("a8cc"),n=o.n(a);n.a},"75ea":function(t,e,o){"use strict";(function(t,a){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=o("a71b"),s=o("0ef8"),i=o("6eb0"),c=o("6cba"),l=o("07b8"),r=function(){return o.e("components/watch-login/watch-button").then(o.bind(null,"2a6c"))},u={components:{wButton:r},data:function(){return{show1:!1,windowHeight:0,phone:"",password:"",isRotate:!1,modalName:"",msg:"",isShowButton:!0}},onLoad:function(e){Object.keys(e).length&&(this.phone=e.phone);var o=this;t.getSystemInfo({success:function(t){o.windowHeight=t.windowHeight,console.log(a("屏幕高度为"+t.windowHeight," at pages\\login\\login.vue:83"))}})},computed:{},methods:{forgetClick:function(){t.navigateTo({url:"register"})},startLogin:function(){var e=this,o=this;if(!o.isRotate)if(/^1[3456789]\d{9}$/.test(o.phone))if(o.password.length<6)t.showToast({title:"密码最少为6位",icon:"none"});else{o.isRotate=!0;var s={phone:o.phone,pwd:o.password};(0,n.login)(s).then(function(n){if(200==n.data.code){var s=n.data.data.token,i=(new Date).getTime(),c={token:s,username:o.phone,password:o.password,saveTime:i};console.log(a(c," at pages\\login\\login.vue:134")),t.setStorageSync("userData",c),e.$store.commit("login",s),e.getUserChatMessages(s),e.getProfileData(s),plus.nativeUI.toast("登录成功",{duration:"long"}),t.switchTab({url:"../Home/home"})}else e.msg=n.data.msg,e.show1=!0;e.isRotate=!1}).catch(function(t){e.msg=t.data.msg,e.show1=!0,e.isRotate=!1})}else t.showToast({title:"手机号格式有误",icon:"none"})},showModal:function(){t.navigateTo({url:"forget"})},reset:function(){this.password=""},getUserChatMessages:function(t){var e=this;this.$store.dispatch("getUserChatList",t).then(function(t){var o=(0,i.charCompare)(t);e.$store.commit("setUserChatMessages",o),console.log(a("获取聊天记录成功，返回合并后的聊天记录"," at pages\\login\\login.vue:182")),console.log(a(e.$store.state.userChatMessages," at pages\\login\\login.vue:183"))}).catch(function(t){switch(t){case"1":(0,i.noNetWork)();break}})},getProfileData:function(e){var o=this;(0,s.getProfileData)(e).then(function(e){if(200==e.data.code){var n=e.data.data;n.avatar=(0,c.replaceImage)(n.avatar),t.setStorage({key:"Message_key",data:n,success:function(t){console.log(a("个人信息写入缓存成功"," at pages\\login\\login.vue:206"))}});var s=t.getStorageSync("integrlUrl");s?t.getSavedFileInfo({filePath:s,success:function(t){t.size&&(console.log(a("本地头像路径获取成功"," at pages\\login\\login.vue:218")),o.$store.commit("setLocalAvatar",s),console.log(a(o.$store.state.userInfo.localAvatar," at pages\\login\\login.vue:220")))},fail:function(t){(0,l.saveAvatar)(n.avatar).then(function(t){o.$store.commit("setLocalAvatar",t),console.log(a("网络图片写入本地成功"," at pages\\login\\login.vue:228"))}).catch(function(t){console.log(a("本地头像保存失败"," at pages\\login\\login.vue:230"))})}}):(0,l.saveAvatar)(n.avatar).then(function(t){o.$store.commit("setLocalAvatar",t),console.log(a("网络图片写入本地成功"," at pages\\login\\login.vue:239"))}).catch(function(t){console.log(a("本地头像保存失败"," at pages\\login\\login.vue:241"))}),o.$store.commit("setUserData",n)}})}}};e.default=u}).call(this,o("6e42")["default"],o("0de9")["default"])},8033:function(t,e,o){"use strict";(function(t){o("dead"),o("921b");a(o("66fd"));var e=a(o("c35c"));function a(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,o("6e42")["createPage"])},a8cc:function(t,e,o){},c35c:function(t,e,o){"use strict";o.r(e);var a=o("5a0e"),n=o("3bad");for(var s in n)"default"!==s&&function(t){o.d(e,t,function(){return n[t]})}(s);o("5bb0");var i,c=o("f0c5"),l=Object(c["a"])(n["default"],a["b"],a["c"],!1,null,null,null,!1,a["a"],i);e["default"]=l.exports}},[["8033","common/runtime","common/vendor"]]]);