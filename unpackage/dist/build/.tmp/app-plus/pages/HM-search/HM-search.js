(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/HM-search/HM-search"],{"0e85":function(t,e,o){"use strict";(function(t){o("dead"),o("921b");i(o("66fd"));var e=i(o("26e1"));function i(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,o("6e42")["createPage"])},"11ea":function(t,e,o){"use strict";var i=o("a6ee"),a=o.n(i);a.a},"26e1":function(t,e,o){"use strict";o.r(e);var i=o("9e3c"),a=o("d7be");for(var n in a)"default"!==n&&function(t){o.d(e,t,function(){return a[t]})}(n);o("11ea");var r=o("2877"),s=Object(r["a"])(a["default"],i["a"],i["b"],!1,null,"d6545e46",null);e["default"]=s.exports},"97e4":function(t,e,o){"use strict";(function(t,i){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=o("5e74"),n=o("f607"),r=function(){return o.e("components/mehaotian-search-revision/mehaotian-search-revision").then(o.bind(null,"7c47"))},s=function(){return o.e("components/icon/icon").then(o.bind(null,"147e"))},d={data:function(){return{defaultKeyword:"",keyword:"",oldKeywordList:[],hotKeywordList:[],keywordList:[],forbid:"",isShowKeywordList:!1,listOthers:"暂无此类别的商品哦,换个词试试吧",width:200,height:64,inputTop:0,arrowTop:0,hasQuery:!1,isKeywordList:!1,cateData:[],windowHeight:""}},onLoad:function(e){var o=this,i={};t.getSystemInfo({success:function(t){o.windowHeight=t.windowHeight,o.width=i.left||t.windowWidth,o.height=i.top?i.top+i.height+8:t.statusBarHeight+44,o.inputTop=i.top?i.top+(i.height-30)/2:t.statusBarHeight+7,o.arrowTop=i.top?i.top+(i.height-32)/2:t.statusBarHeight+6,o.init()}})},onReady:function(){this.$refs.mSearch.isFocus=!0},components:{mSearch:r,tuiIcon:s},methods:{init:function(){this.loadDefaultKeyword(),this.loadOldKeyword(),this.loadHotKeyword(),this.categoryData()},blur:function(){t.hideKeyboard()},loadDefaultKeyword:function(){},loadOldKeyword:function(){var e=t.getStorageSync("OldKeys");e.length&&(this.defaultKeyword=JSON.parse(e)[0]||"狗屎糖",this.oldKeywordList=JSON.parse(e))},loadHotKeyword:function(){this.hotKeywordList=["狗屎糖","狗屎糖","狗屎糖","狗屎糖","狗屎糖","狗屎糖","狗屎糖","狗屎糖","狗屎糖"]},inputChange:function(t){var e=this,o=t.detail?t.detail.value:t;if(!o)return this.keywordList=[],void(this.isShowKeywordList=!1);this.isShowKeywordList=!0,this.isKeywordList=!1,(0,n.getDetailData)({keyword:o,showModel:!0}).then(function(t){var a=t.data.data;e.keywordList=e.drawCorrelativeKeyword(a,o),console.log(i(e.keywordList," at pages\\HM-search\\HM-search.vue:198")),e.keywordList.length||(e.isKeywordList=!0)})},drawCorrelativeKeyword:function(t,e){for(var o=t.length,i=[],a=0;a<o;a++){var n=t[a],r=n.store_name.replace(e,"<span style='color: #9f9f9f;'>"+e+"</span>");r="<div>"+r+"</div>";var s={keyword:n.store_name,htmlStr:r,id:n.id};i.push(s)}return i},setkeyword:function(t){this.keyword=t.keyword},oldDelete:function(){var e=this;t.showModal({content:"确定清除历史搜索记录？",success:function(o){o.confirm?(console.log(i("用户点击确定"," at pages\\HM-search\\HM-search.vue:233")),e.oldKeywordList=[],t.removeStorage({key:"OldKeys"})):o.cancel&&console.log(i("用户点击取消"," at pages\\HM-search\\HM-search.vue:239"))}})},doInput:function(t){this.keyword=t,this.isShowKeywordList=!0,this.$refs.mSearch.isFocus=!0,this.inputChange(t)},hotToggle:function(){this.forbid=this.forbid?"":"_forbid"},doSearch:function(e,o){e=e||(this.keyword?this.keyword:this.defaultKeyword),this.keyword=e,this.saveKeyword(e),void 0!=o?t.navigateTo({url:"../ShopDetails/shopDetails?id=".concat(o)}):this.keywordList.length?t.navigateTo({url:"../ShopDetails/shopDetails?id=".concat(this.keywordList[0].id)}):t.showToast({title:"暂无此类别哦，换个词试试吧",icon:"none"})},doSearch2:function(e){e=e||(this.keyword?this.keyword:this.defaultKeyword),this.saveKeyword(e),t.redirectTo({url:"HM-searchList?key=".concat(e)})},saveKeyword:function(e){var o=this;t.getStorage({key:"OldKeys",success:function(a){console.log(i(a.data," at pages\\HM-search\\HM-search.vue:296"));var n=JSON.parse(a.data),r=n.indexOf(e);-1==r?n.unshift(e):(n.splice(r,1),n.unshift(e)),n.length>10&&n.pop(),t.setStorage({key:"OldKeys",data:JSON.stringify(n)}),o.oldKeywordList=n},fail:function(i){var a=[e];t.setStorage({key:"OldKeys",data:JSON.stringify(a)}),o.oldKeywordList=a}})},getFocus:function(t){},back:function(){t.navigateBack()},categoryData:function(){var t=this;(0,a.getCategory)(!0).then(function(e){200==e.data.code&&(t.cateData=e.data.data)})},goCategory:function(e){var o=e.cate_name;this.saveKeyword(o),t.redirectTo({url:"HM-searchList?sid=".concat(e.id,"&name=").concat(o)})}}};e.default=d}).call(this,o("6e42")["default"],o("0de9")["default"])},"9e3c":function(t,e,o){"use strict";var i=function(){var t=this,e=t.$createElement;t._self._c},a=[];o.d(e,"a",function(){return i}),o.d(e,"b",function(){return a})},a6ee:function(t,e,o){},d7be:function(t,e,o){"use strict";o.r(e);var i=o("97e4"),a=o.n(i);for(var n in i)"default"!==n&&function(t){o.d(e,t,function(){return i[t]})}(n);e["default"]=a.a}},[["0e85","common/runtime","common/vendor"]]]);