(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/Home/Barter/issue"],{"2a32":function(e,t,n){"use strict";var i,a=function(){var e=this,t=e.$createElement;e._self._c},o=[];n.d(t,"b",function(){return a}),n.d(t,"c",function(){return o}),n.d(t,"a",function(){return i})},"4e6f":function(e,t,n){"use strict";(function(e){n("dead"),n("921b");i(n("66fd"));var t=i(n("95fb"));function i(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,n("6e42")["createPage"])},"804a":function(e,t,n){"use strict";var i=n("99bb"),a=n.n(i);a.a},"90a4":function(e,t,n){"use strict";(function(e,i){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n("d27c"),o=n("6397");function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),i.forEach(function(t){r(e,t,n[t])})}return e}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var u=function(){return Promise.all([n.e("common/vendor"),n.e("components/w-picker/w-picker")]).then(n.bind(null,"2b9d"))},c={components:{wPicker:u},data:function(){return{spacing:100,focus:!1,imgList:[],updataImgList:[],selectList:[{label:"规格1",value:1},{label:"规格2",value:0},{label:"规格3",value:0},{label:"规格4",value:0},{label:"规格5",value:0},{label:"规格6",value:0},{label:"规格7",value:0},{label:"规格8",value:0},{label:"规格9",value:0}],editItems:[{type:"textarea",value:""}],pageHeight:26,guigeList:[{name:"",size:"",price:"",isShowAnimate:!1}],inputInfo:{title:"",product:"",category:{},price:"",name:"",phone:"",address:""},shopDetail:"",address2:[],token:""}},onLoad:function(t){t.list?this.doChoose1List(t.list):(plus.nativeUI.toast("页面出现错误，请重试"),e.navigateBack()),this.token=this.$store.getters.isToken},onShow:function(){var e=this.$store.state.richHtml;Object.keys(e).length&&(this.shopDetail="....................")},onNavigationBarButtonTap:function(){this.save()},methods:{save:function(){var t=this;t.inputInfo.title?t.inputInfo.category?t.imgList.length?t.inputInfo.name?/^1[3456789]\d{9}$/.test(t.inputInfo.phone)?t.inputInfo.address?(e.showLoading({mask:!0}),t.imgList.forEach(function(n){(0,a.upload)(n,!0).then(function(n){if(t.updataImgList.push(n.url),console.log(i(t.updataImgList," at pages\\Home\\Barter\\issue.vue:283")),console.log(i(t.imgList," at pages\\Home\\Barter\\issue.vue:284")),t.updataImgList.length==t.imgList.length){var a={};t.guigeList.length&&(a=s({},t.guigeList.map(function(e){return{name:e.name,price:e.price,num:e.size}})));var r={title:t.inputInfo.title,goods_name:t.inputInfo.product||"暂时没想好",cate_id:t.inputInfo.category.value,price:t.inputInfo.price||0,images:t.updataImgList.join(","),info:a,province:t.address2[0],city:t.address2[1],name:t.inputInfo.name,phone:t.inputInfo.phone,content:Object.keys(t.$store.state.richHtml).length?t.$store.state.richHtml:""};console.log(i(r," at pages\\Home\\Barter\\issue.vue:309"));var u=t.token;(0,o.yi_publish)(r,u).then(function(n){e.hideLoading(),200==n.data.code?(plus.nativeUI.toast("发布成功",{duration:"long"}),e.redirectTo({url:"BaterClsaaify"})):(plus.nativeUI.toast(n.data.msg,{duration:"long"}),t.updataImgList=[],e.showToast({title:n.data.msg,icon:"none"}))})}else t.updataImgList.length>t.imgList&&(t.updataImgList=[],e.hideLoading())})})):plus.nativeUI.toast("请填写您的地址",{duration:"long",verticalAlign:"center"}):plus.nativeUI.toast("请输入正确的电话格式",{duration:"long",verticalAlign:"center"}):plus.nativeUI.toast("请填写您的姓名",{duration:"long",verticalAlign:"center"}):plus.nativeUI.toast("请上传商品图片(至少一张)",{duration:"long",verticalAlign:"center"}):plus.nativeUI.toast("请选择商品分类",{duration:"long",verticalAlign:"center"}):plus.nativeUI.toast("请填写商品标题",{duration:"long",verticalAlign:"center"})},issueClick:function(){e.navigateTo({url:"../texts/index/index"})},doChoose1List:function(e){var t=JSON.parse(e);this.selectList=t.map(function(e){return{label:e.cate_name,value:e.id}})},ChooseImage:function(){var t=this;e.chooseImage({count:5,sizeType:["original","compressed"],sourceType:["album"],success:function(e){0!=t.imgList.length?t.imgList=t.imgList.concat(e.tempFilePaths):t.imgList=e.tempFilePaths}})},ViewImage:function(t){e.previewImage({urls:this.imgList,current:t.currentTarget.dataset.url})},DelImg:function(t){var n=this;e.showModal({title:"召唤师",content:"确定要删除这段回忆吗？",cancelText:"再看看",confirmText:"再见",success:function(e){e.confirm&&n.imgList.splice(t.currentTarget.dataset.index,1)}})},insertImg:function(){var t=this;e.chooseImage({count:1,sizeType:["original","compressed"],sourceType:["album"],success:function(n){var i=n.tempFilePaths[0];e.showLoading({title:"正在上传图片..."}),setTimeout(function(){e.hideLoading()},1e3);var a=i;t.editItems.push({type:"img",value:a,progress:0}),t.editItems.push({type:"textarea",value:""}),plus.key.showSoftKeybord(),e.pageScrollTo({scrollTop:1e7,duration:0})}})},inputIng:function(e){var t=this,n=e.detail.value,i=e.currentTarget.dataset.index;t.$set(t.editItems[i],"value",n)},linechage:function(t){var n=this,a=t.detail.height,o=t.detail.heightRpx,s=e.upx2px(a+o);n.pageHeight=s,console.log(i(n.pageHeight," at pages\\Home\\Barter\\issue.vue:451")),e.pageScrollTo({scrollTop:1e7,duration:0})},delImg:function(t){var n=t.currentTarget.dataset.index,a=this;e.showModal({title:"确定要删除该图片吗？",content:" ",success:function(e){e.confirm&&(console.log(i("用户点击确定"," at pages\\Home\\Barter\\issue.vue:466")),a.editItems.splice(n,1))}}),console.log(i(n," at pages\\Home\\Barter\\issue.vue:471"))},addGuige:function(){this.guigeList.push({name:"",size:"",price:"",isShowAnimate:!0})},removeGuide:function(e,t){this.guigeList.splice(t,1)},fenleiClick:function(){this.$refs.selector.show()},onConfirm1:function(e){this.inputInfo.category=e.checkArr},addressClick:function(){this.$refs.region.show()},onConfirm2:function(e){this.address2=e.checkArr,this.inputInfo.address=e.result}}};t.default=c}).call(this,n("6e42")["default"],n("0de9")["default"])},"95fb":function(e,t,n){"use strict";n.r(t);var i=n("2a32"),a=n("f69b");for(var o in a)"default"!==o&&function(e){n.d(t,e,function(){return a[e]})}(o);n("804a"),n("dc3c");var s,r=n("f0c5"),u=Object(r["a"])(a["default"],i["b"],i["c"],!1,null,"e5eee028",null,!1,i["a"],s);t["default"]=u.exports},"99bb":function(e,t,n){},a7ce:function(e,t,n){},dc3c:function(e,t,n){"use strict";var i=n("a7ce"),a=n.n(i);a.a},f69b:function(e,t,n){"use strict";n.r(t);var i=n("90a4"),a=n.n(i);for(var o in i)"default"!==o&&function(e){n.d(t,e,function(){return i[e]})}(o);t["default"]=a.a}},[["4e6f","common/runtime","common/vendor"]]]);