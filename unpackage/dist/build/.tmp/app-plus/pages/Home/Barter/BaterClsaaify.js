(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/Home/Barter/BaterClsaaify"],{"272e":function(t,e,n){"use strict";(function(t,i){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=n("6397"),a=n("6cba");function r(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},i=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),i.forEach(function(e){c(t,e,n[e])})}return t}function c(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var s=function(){return Promise.all([n.e("common/vendor"),n.e("components/linzq-citySelect/linzq-citySelect")]).then(n.bind(null,"b34e"))},u=function(){return n.e("components/popup-layer/popup-layer").then(n.bind(null,"689f"))},l=function(){return n.e("components/QS-tabs/QS-tabs").then(n.bind(null,"efdf"))},f=function(){return Promise.all([n.e("common/vendor"),n.e("components/mescroll-uni/mescroll-uni")]).then(n.bind(null,"8e95"))},h={components:{QSTabs:l,citySelect:s,popupLayer:u,MescrollUni:f},data:function(){return{cityName:"",show1:!1,modalText:"",loadingType:1,tabs_3:["推荐","优惠","折扣","红包","开团","tab-6","tab-7","tab-8"],current_3:0,productList:[],showDrawer:!1,cityNetwork:{},token:"",downOption:{use:!0,auto:!0},upOption:{use:!0,auto:!0,page:{num:0,size:10},noMoreSize:5,textNoMore:"-- 没有更多了 --",empty:{tip:"暂无相关数据"}},hasNext:!0,isLoadTabs:!1,waterList:[]}},onNavigationBarButtonTap:function(){var e=this.tabs_3;e.length&&(e=JSON.stringify(e),t.navigateTo({url:"issue?list=".concat(e)}))},onLoad:function(){this.token=this.$store.getters.isToken;var e=t.getStorageSync("localCity");this.cityName=e?e.city:"获取中...",this.getJingwei()},onReady:function(){},onShow:function(){},onBackPress:function(){if(this.showDrawer)return this.$refs.popupRef.close(),this.showDrawer=!1,!0},methods:{groupCut:function(t,e){var n=0,i=[];while(n<t.length)i.push(t.slice(n,n+=e));return i},handleLoad:function(t){if(t){var e=t.length;this.waterList=this.groupCut(t,e/2)}},getList:function(t,e,n,c){var s=this;if("获取中..."!=this.cityName){var u=this.token,l=this.cityName;(0,o.yi_list)({city:l,cate_id:c},t,e,u).then(function(i){if(200==i.data.code){var o=i.data.data;if(!s.isLoadTabs){s.isLoadTabs=!0;var c=o.cateList;c.unshift({id:0,cate_name:"推荐"}),s.tabs_3=c}var u=o.list;u.length&&(u=u.map(function(t){return t.images=t.images.map(function(t){return(0,a.replaceImage)(t)}),r({},t)})),s.hasNext=u.length>=e,1==t&&(s.productList=[]),s.productList=s.productList.concat(u),s.handleLoad(s.productList),n&&n.endSuccess(u.length,s.hasNext)}}).catch(function(t){console.log(i(t," at pages\\Home\\Barter\\BaterClsaaify.vue:233")),n&&n.endErr()})}else plus.nativeUI.toast("获取信息失败")},change:function(t){this.current_3=t,this.waterList=[];var e=this.$refs.mescroll.mescroll;e.resetUpScroll()},detailsClck:function(e,n){var i=e.id;t.navigateTo({url:"BarterInfo?id=".concat(i)})},openCitys:function(){this.$refs.popupRef.show(),this.showDrawer=!0},back_city:function(t){"no"!==t&&t.cityName!=this.cityName&&this.dealCity(t.cityName),this.$refs.popupRef.close(),this.showDrawer=!1},showCity:function(t){t!=this.cityName&&this.dealCity(t),this.$refs.popupRef.close(),this.showDrawer=!1},dealCity:function(t){t&&(this.cityName=t),this.waterList=[],this.current_3=0;var e=this.$refs.mescroll.mescroll;e.resetUpScroll()},getJingwei:function(){var e=this;this.$store.dispatch("getWarpweft").then(function(n){var i=n;if(e.cityNetwork=i,"获取中..."==e.cityName)e.cityName=i.city;else if(e.cityName!=i.city){var o=i.city;e.modalText="检测到您所在的城市为".concat(o,",是否切换？"),e.show1=!0}if(t.setStorage({key:"localCity",data:i}),e.cityNetwork=i,e.$refs.mescroll){var a=e.$refs.mescroll.mescroll;a.resetUpScroll()}else e.getList(1,10,!1,"")}).catch(function(t){0==t&&plus.nativeUI.toast("获取位置信息失败，请检查您的网络和定位是否开启",{duration:"long"})})},changeCity:function(){var t=this.cityNetwork.city;this.cityName=t},downCallback:function(t){t.resetUpScroll()},upCallback:function(t){var e=t.num,n=t.size,i=this.tabs_3[this.current_3].id;this.getList(e,n,t,i)}}};e.default=h}).call(this,n("6e42")["default"],n("0de9")["default"])},"38c8":function(t,e,n){"use strict";n.r(e);var i=n("272e"),o=n.n(i);for(var a in i)"default"!==a&&function(t){n.d(e,t,function(){return i[t]})}(a);e["default"]=o.a},"428f":function(t,e,n){},"593a":function(t,e,n){"use strict";(function(t){n("dead"),n("921b");i(n("66fd"));var e=i(n("bafb"));function i(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,n("6e42")["createPage"])},9278:function(t,e,n){"use strict";var i=n("428f"),o=n.n(i);o.a},9482:function(t,e,n){"use strict";var i,o=function(){var t=this,e=t.$createElement;t._self._c},a=[];n.d(e,"b",function(){return o}),n.d(e,"c",function(){return a}),n.d(e,"a",function(){return i})},bafb:function(t,e,n){"use strict";n.r(e);var i=n("9482"),o=n("38c8");for(var a in o)"default"!==a&&function(t){n.d(e,t,function(){return o[t]})}(a);n("9278");var r,c=n("f0c5"),s=Object(c["a"])(o["default"],i["b"],i["c"],!1,null,"6990e75a",null,!1,i["a"],r);e["default"]=s.exports}},[["593a","common/runtime","common/vendor"]]]);