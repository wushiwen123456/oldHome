(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/My/footmark/footmark"],{3165:function(t,n,e){"use strict";var o=e("45a1"),r=e.n(o);r.a},"431a":function(t,n,e){"use strict";e.r(n);var o=e("f654"),r=e.n(o);for(var i in o)"default"!==i&&function(t){e.d(n,t,function(){return o[t]})}(i);n["default"]=r.a},"45a1":function(t,n,e){},"49c7":function(t,n,e){"use strict";e.r(n);var o=e("bc0f"),r=e("431a");for(var i in r)"default"!==i&&function(t){e.d(n,t,function(){return r[t]})}(i);e("3165");var a=e("2877"),s=Object(a["a"])(r["default"],o["a"],o["b"],!1,null,null,null);n["default"]=s.exports},"93c5":function(t,n,e){"use strict";(function(t){e("20d5"),e("921b");o(e("66fd"));var n=o(e("49c7"));function o(t){return t&&t.__esModule?t:{default:t}}t(n.default)}).call(this,e("6e42")["createPage"])},bc0f:function(t,n,e){"use strict";var o=function(){var t=this,n=t.$createElement,e=(t._self._c,t.__map(t.shopList,function(n,e){var o=t.isSellectAll(n,e);return{$orig:t.__get_orig(n),m0:o}}));t.$mp.data=Object.assign({},{$root:{l0:e}})},r=[];e.d(n,"a",function(){return o}),e.d(n,"b",function(){return r})},f654:function(t,n,e){"use strict";(function(t,o){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=e("1a9f"),i=(e("e443"),e("2f62")),a=e("0307");function s(t){return l(t)||u(t)||c()}function c(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function u(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function l(t){if(Array.isArray(t)){for(var n=0,e=new Array(t.length);n<t.length;n++)e[n]=t[n];return e}}function f(t){for(var n=1;n<arguments.length;n++){var e=null!=arguments[n]?arguments[n]:{},o=Object.keys(e);"function"===typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(e).filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.forEach(function(n){h(t,n,e[n])})}return t}function h(t,n,e){return n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e,t}var p={components:{},onNavigationBarButtonTap:function(){var t=getCurrentPages(),n=t[t.length-1],e=n.$getAppWebview(),o=e.getStyle().titleNView;o.buttons&&("管理"==o.buttons[0].text?o.buttons[0].text="完成":o.buttons[0].text="管理",this.isManage=!this.isManage,this.shopList.forEach(function(t,n){t.shopAllMessage.forEach(function(t){t.type=!1})}),e.setStyle({titleNView:o}))},onShow:function(){var n=this;console.log(t(1," at pages\\My\\footmark\\footmark.vue:92")),this.isManage=!1,this.isToken?(0,r.getShopCartData)(this.isToken).then(function(e){if(200==e.data.code){var o=e.data.data.group,r=function(e){var r={};r.shopname=o[e][0].shop_info.shop_name,r.shopAllMessage=[],r.shopType=!1,o[e].forEach(function(t){var n=(0,a.replaceImage)(t.productInfo.image);r.shopAllMessage.push({shoptitle:t.productInfo.store_name,specification:t.productInfo.attrInfo?t.productInfo.attrInfo.suk:"",money:t.productInfo.attrInfo?t.productInfo.attrInfo.price:t.productInfo.price,image:n,num:t.cart_num,id:t.id,uid:t.uil,type:!1,count:0,uniqueId:t.productInfo.attrInfo?t.productInfo.attrInfo.unique:"",combinationId:t.combination_id,seckill_id:t.seckill_id,bargain_id:t.bargain_id})}),n.$store.commit("clearCart"),n.$store.commit("addCart",r),n.shopList=n.$store.state.CartList,console.log(t(n.shopList," at pages\\My\\footmark\\footmark.vue:149"))};for(var i in o)r(i)}}):o.showModal({title:"您还未登录，是否前去登录？",content:"",cancelText:"等会再说",cancelColor:"#333333",confirmText:"去登陆",confirmColor:"#333333",success:function(t){t.confirm&&o.navigateTo({url:"../login/login"})}})},data:function(){return{shopList:[{},{},{}],isManage:!1}},computed:f({},(0,i.mapGetters)(["isToken"]),{isShowToPay:function(){return!this.isManage},msg:function(){return this.isManage?"完成":"管理"},sumMoney:function(){return this.used[0]?this.used.reduce(function(t,n){return 1*t+n.money*n.num},0).toFixed(2):0},used:function(){var t=[];return this.shopList.length&&this.shopList.forEach(function(n){n.shopAllMessage&&n.shopAllMessage.forEach(function(n){n.type&&t.push(n)})}),t},allselect:function(){return this.shopList.every(function(t){return t.shopType})},allselectTxt:function(){return this.allselect?"全不选":"全选"}}),methods:{isDisabled:function(t,n){return!(t.num>1)},isSellectAll:function(t,n){return t.shopAllMessage&&t.shopAllMessage.every(function(t){return t.type})?(t.shopType=!0,!0):(t.shopType=!1,!1)},goPay:function(){var n=[];n.push.apply(n,s(this.used.map(function(t){return t.id}))),console.log(t(n," at pages\\My\\footmark\\footmark.vue:220")),n.length?(this.$store.commit("keepCartId",n),o.navigateTo({url:"../ShopDetails/affirm/affirmOrder"})):o.showToast({title:"请选择商品",icon:"none"})},mangerClick:function(){},removeProduct:function(){var t=this;o.showModal({title:"确认删除这些商品么",content:"Are you sure remove this product?",success:function(n){if(n.confirm){var e=[],o=t.shopList;o.forEach(function(t,n){t.shopAllMessage.forEach(function(t,n){t.type&&e.push(t.id)})}),t.removeCart(e,t.isToken,o)}}})},removeCart:function(t,n,e){var i=this;(0,r.removeCart)(t,n).then(function(t){200==t.data.code&&(i.shopList.forEach(function(t,n){for(var e=t.shopAllMessage,o=e.length-1;o>=0;o--)e[o].type&&e.splice(o,1)}),o.showToast({title:"删除成功",icon:"none"}))})},ShopClick:function(t,n){t.shopType?(t.shopType=!1,t.shopAllMessage.forEach(function(t){t.type=!1})):(t.shopType=!0,t.shopAllMessage.forEach(function(t){t.type=!0}))},shoponeClick:function(t,n,e){e.type=!e.type},addShopClick:function(t,n,e){e.num++,(0,r.changeCartNum)(e.id,e.num,this.isToken).then(function(t){200!=t.data.code&&o.showToast({title:"网络错误，修改失败"})})},moveShopClick:function(t,n,e){e.num>1&&(e.num--,(0,r.changeCartNum)(e.id,e.num,this.isToken).then(function(t){200!=t.data.code&&o.showToast({title:"网络错误，修改失败"})}))},shopAllselectClick:function(){this.allselect?this.shopList.forEach(function(t){t.shopAllMessage.forEach(function(t){t.type=!1})}):this.shopList.forEach(function(t){t.shopAllMessage.forEach(function(t){t.type=!0})})},numAdd:function(t,n){var e,o,r;try{o=t.toString().split(".")[1].length}catch(i){o=0}try{r=n.toString().split(".")[1].length}catch(i){r=0}return e=Math.pow(10,Math.max(o,r)),(t*e+n*e)/e},numSub:function(t,n){var e,o,r,i;try{o=t.toString().split(".")[1].length}catch(a){o=0}try{r=n.toString().split(".")[1].length}catch(a){r=0}return e=Math.pow(10,Math.max(o,r)),i=o>=r?o:r,((t*e-n*e)/e).toFixed(i)},numMulti:function(t,n){var e=0;try{e+=t.toString().split(".")[1].length}catch(o){}try{e+=n.toString().split(".")[1].length}catch(o){}return Number(t.toString().replace(".",""))*Number(n.toString().replace(".",""))/Math.pow(10,e)}}};n.default=p}).call(this,e("0de9")["default"],e("6e42")["default"])}},[["93c5","common/runtime","common/vendor"]]]);