(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/My/Inform/Chat/chat"],{"1b78":function(t,e,n){"use strict";n.r(e);var o=n("5059"),s=n("628f");for(var i in s)"default"!==i&&function(t){n.d(e,t,function(){return s[t]})}(i);n("c411"),n("c4b5");var c,a=n("f0c5"),r=Object(a["a"])(s["default"],o["b"],o["c"],!1,null,"715432ca",null,!1,o["a"],c);e["default"]=r.exports},5059:function(t,e,n){"use strict";var o,s=function(){var t=this,e=t.$createElement;t._self._c},i=[];n.d(e,"b",function(){return s}),n.d(e,"c",function(){return i}),n.d(e,"a",function(){return o})},"628f":function(t,e,n){"use strict";n.r(e);var o=n("a282"),s=n.n(o);for(var i in o)"default"!==i&&function(t){n.d(e,t,function(){return o[t]})}(i);e["default"]=s.a},"950c":function(t,e,n){"use strict";(function(t){n("dead"),n("921b");o(n("66fd"));var e=o(n("1b78"));function o(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,n("6e42")["createPage"])},a282:function(t,e,n){"use strict";(function(t,o){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;n("6cba"),n("c940");var s=n("6eb0"),i=n("d27c"),c=(n("2799"),{data:function(){return{show1:!1,NOdata:!1,userList:[],winSize:{},showShade:!1,showPop:!1,popButton:["标为关注","置顶聊天","删除该聊天"],popStyle:"",pickerUserIndex:-1,style:{height:""},profile:{},pickerUserIndex2:-1}},onLoad:function(){this.token=this.$store.getters.isToken;var e=t.getSystemInfoSync();this.style.height=e.windowHeight,this.profile=t.getStorageSync("Message_key"),this.getListData(),this.setWebSocket()},onShow:function(){},onReady:function(){},onUnload:function(){t.closeSocket({success:function(){console.log(o("关闭Scoket连接成功"," at pages\\My\\Inform\\Chat\\chat.vue:97"))}})},methods:{listTap:function(e){if(!this.showShade){var n=e.user,o=JSON.stringify(n);this.$store.commit("setUserChatMessages",this.userList),t.navigateTo({url:"../../../ShopDetails/informtion/informtion?shopInfo=".concat(o,"&indet=c")})}},setWebSocket:function(){(0,s.openWebScoket)(),t.onSocketOpen(function(t){console.log(o("WebSocket连接已打开！"," at pages\\My\\Inform\\Chat\\chat.vue:122"))}),t.onSocketError(function(t){console.log(o("WebSocket连接失败,请检查"," at pages\\My\\Inform\\Chat\\chat.vue:125"))}),t.onSocketMessage(function(e){t.$emit("getMessage",e)})},getListData:function(){this.userList=this.$store.state.userChatMessages,this.userList.length&&(this.NOdata=!0)},getWindowSize:function(){var e=this;t.getSystemInfo({success:function(t){e.winSize={witdh:t.windowWidth,height:t.windowHeight}}})},onLongPress:function(t){var e=this,n=[t.touches[0],"",t.currentTarget.dataset.index],o=n[0],s=n[1],i=n[2];s=o.clientY>this.winSize.height/2?"bottom:".concat(this.winSize.height-o.clientY,"px;"):"top:".concat(o.clientY,"px;"),o.clientX>this.winSize.witdh/2?s+="right:".concat(this.winSize.witdh-o.clientX,"px"):s+="left:".concat(o.clientX,"px"),this.popStyle=s,this.pickerUserIndex=Number(i),this.showShade=!0,this.$nextTick(function(){setTimeout(function(){e.showPop=!0},10)})},hidePop:function(){var t=this;this.showPop=!1,this.pickerUserIndex=-1,setTimeout(function(){t.showShade=!1},250)},deleteChatMessages:function(){var e=this;console.log(o(this.pickerUserIndex2," at pages\\My\\Inform\\Chat\\chat.vue:182"));var n=this.pickerUserIndex2,s=this.userList[n].group_id;(0,i.removeChatMessages)(s,this.token).then(function(s){200==s.data.code&&(plus.nativeUI.toast("删除成功",{duration:"long"}),e.$store.commit("removeSomeChatMessages",n),t.setStorage({key:"messageall_key",data:e.userList,success:function(){console.log(o("删除缓存成功"," at pages\\My\\Inform\\Chat\\chat.vue:197"))}}))})},pickerMenu:function(t){var e=Number(t.currentTarget.dataset.index);switch(this.pickerUserIndex2=this.pickerUserIndex,console.log(o(this.pickerUserIndex2," at pages\\My\\Inform\\Chat\\chat.vue:209")),console.log(o("第".concat(this.pickerUserIndex+1,"个用户,第").concat(e+1,"个按钮")," at pages\\My\\Inform\\Chat\\chat.vue:210")),e+1){case 3:this.show1=!0;break;case 2:break;case 1:break}this.hidePop()}}});e.default=c}).call(this,n("6e42")["default"],n("0de9")["default"])},a773:function(t,e,n){},c411:function(t,e,n){"use strict";var o=n("a773"),s=n.n(o);s.a},c4b5:function(t,e,n){"use strict";var o=n("fc56"),s=n.n(o);s.a},fc56:function(t,e,n){}},[["950c","common/runtime","common/vendor"]]]);