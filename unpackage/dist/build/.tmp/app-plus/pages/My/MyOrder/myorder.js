(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/My/MyOrder/myorder"],{3534:function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=n("0ef8"),o=n("6cba"),a=n("58c8"),i=function(){return n.e("components/tui-tabs/tui-tabs").then(n.bind(null,"96d6"))},s=function(){return n.e("components/x-modal/x-modal").then(n.bind(null,"f3c0"))},c=function(){return Promise.all([n.e("common/vendor"),n.e("components/mescroll-uni/mescroll-uni")]).then(n.bind(null,"8e95"))},u={components:{tuiTabs:i,Modal:s,MescrollUni:c},data:function(){return{windowHeight:0,currentTab:0,show2:!1,tabs2:[{name:"全部",page:0},{name:"待付款",page:0},{name:"待发货",page:0},{name:"待收货",page:0},{name:"待评价",page:0}],orderInfo:[],show1:!1,currentClick:-1,token:"",style:{height:""},height:"",downOption:{use:!0,auto:!0},upOption:{use:!0,auto:!0,page:{num:0,size:10},noMoreSize:5,textNoMore:"-- 没有更多了 --",empty:{use:!0,tip:"您还没有相关的订单",btnText:"",fixed:!0,top:"35%",zIndex:99}},hasNext:!0}},onLoad:function(e){var n=t.getSystemInfoSync();this.style.height=n.windowHeight;var r=this,o=parseInt(e.index);r.currentTab=o,r.token=r.$store.getters.isToken,this.$store.getters.isToken?this.orderInfo=[]:t.switchTab({url:"../../Home/home"}),this.height=t.getSystemInfoSync().windowHeight},onReady:function(){},onShow:function(){},methods:{detail:function(e,n){this.$store.commit("setOrderKey",e.order_id);var r=e._status._type;if(-1==r||-2==r||6==r)t.navigateTo({url:"../MyBooking/refund/refundMessage"});else if(1==r&&"拼团中"==e._status._title){var o=e.unified_order;this.$store.commit("setOrderKey",o),t.navigateTo({url:"/pages/PayOrder/payOrderMessage/payorderMessage"})}else t.navigateTo({url:"orderdetail"})},listImage:function(t,e){return t.productInfo.attrInfo?t.productInfo.attrInfo.image:t.productInfo.image},totalPrice:function(t,e){return t.cartInfo[0].productInfo.attrInfo?t.cartInfo[0].productInfo.attrInfo.price:t.cartInfo[0].productInfo.price},storeName:function(t,e){return t.shopInfo?t.shopInfo.shop_name:"integral"==t.pay_type?"客多多官方积分商城":void 0},showText:function(t,e){var n=t._status;switch(n._type){case 0:return"立即支付";case-1:return"申请退款中"}},change:function(t){if(this.currentTab!=t.index){this.currentTab=t.index,this.orderInfo=[];var e=this.$refs.mescroll.mescroll;e.resetUpScroll()}},userOrder:function(t,e,n){var a=this,i=this.currentTab,s=this.token;(0,r.userOrder)(i,t,e,s).then(function(r){if(200==r.data.code){var i=r.data.data;0!=i.length&&i.forEach(function(t){t.cartInfo.forEach(function(t){var e=t.productInfo.attrInfo?t.productInfo.attrInfo.image:t.productInfo.image,n=(0,o.replaceImage)(e);t.productInfo.attrInfo?t.productInfo.attrInfo.image=n:t.productInfo.image=n})}),a.hasNext=i.length>=e,1==t&&(a.orderInfo=[]),a.orderInfo=a.orderInfo.concat(i),n.endSuccess(i.length,a.hasNext)}else n.endErr()})},downCallback:function(t){t.resetUpScroll()},upCallback:function(t){var e=t.num,n=t.size;this.userOrder(e,n,t)},tixing:function(){t.showToast({title:"已提醒买家发货",icon:"none"})},affirmClick:function(t,e){var n=t._status;switch(n._type){case 0:this.goPay(t);break;case-1:this.moneyBack(t);break;default:return}},goPay:function(e){this.$store.commit("setOrderKey",e.order_id),t.navigateTo({url:"orderdetail"})},lookWuliu:function(){t.navigateTo({url:""})},dealBtnLeft:function(t){var e=parseInt(t._status._type);switch(e){case-2:return"查看售后";case-1:return"查看售后";case 0:return"查看详情";case 1:return"查看详情";case 2:return"查看物流";case 3:return"查看订单";default:return"查看详情"}},dealBtnRight:function(t){var e=parseInt(t._status._type);switch(e){case 0:return"立即付款";case 1:return"拼团商品"==this.shopType(t)?"我的拼团":"提醒卖家发货";case 2:return"确认收货";case 3:return"查看物流";default:if("拼团商品"==this.shopType(t))return"我的拼团"}},DetlVoStatus:function(t){return t._status._title},btnCliclLeft:function(e,n){var r=parseInt(e._status._type);switch(r){case 0:this.detail(e);break;case 1:this.detail(e);break;case 2:var o=e.order_id;t.navigateTo({url:"../logistics/logistics?id=".concat(o)});break;case 3:this.detail(e);break;default:this.detail(e)}},goPingJia2:function(){this.change({index:4})},btnClickRight:function(e,n){var r=parseInt(e._status._type);switch(r){case 0:this.detail(e);break;case 1:"拼团商品"==this.shopType(e)?t.navigateTo({url:"../MyBooking/mybooking"}):this.tixing(e);break;case 2:this.show1=!0,this.currentClick=n;break;case 3:var o=e.order_id;t.navigateTo({url:"../logistics/logistics?id=".concat(o)});break;default:"拼团商品"==this.shopType(e)&&t.navigateTo({url:"../MyBooking/mybooking"})}},shopDetail:function(e,n){if(e.combination_id)this.$store.commit("setcombinId",e.combination_id),t.navigateTo({url:"../../ShopDetails/groubBooking"});else{var r=e.productInfo.id;t.navigateTo({url:"../../ShopDetails/shopDetails?id=".concat(r)})}},ConfirmOrder:function(){var t=this,e=this.orderInfo[this.currentClick];(0,a.affirmOrder)(e.order_id,this.token).then(function(e){200==e.data.code?(plus.nativeUI.toast("已收货"),t.orderInfo.splice(t.currentClick,1),setTimeout(function(){t.show2=!0},300)):plus.nativeUI.toast(e.data.msg)})},goPingjia:function(e){this.$store.commit("setOrderDetail",e),t.navigateTo({url:"evaluate"})},b_status:function(t){return t._status._msg||""},shopType:function(t){return t.pink_id?"拼团商品":t.seckill_id?"秒杀商品":t.bargain_id?"砍价商品":"普通商品"}}};e.default=u}).call(this,n("6e42")["default"])},4385:function(t,e,n){"use strict";n.r(e);var r=n("3534"),o=n.n(r);for(var a in r)"default"!==a&&function(t){n.d(e,t,function(){return r[t]})}(a);e["default"]=o.a},"8c9a":function(t,e,n){"use strict";var r,o=function(){var t=this,e=t.$createElement,n=(t._self._c,t.__map(t.orderInfo,function(e,n){var r=t.storeName(e,n),o=t.DetlVoStatus(e),a=t.__map(e.cartInfo,function(e,n){var r=t.listImage(e,n);return{$orig:t.__get_orig(e),m2:r}}),i=t.b_status(e),s=t.shopType(e),c=t.dealBtnLeft(e),u=t.dealBtnLeft(e),f=t.dealBtnRight(e),d=t.dealBtnRight(e);return{$orig:t.__get_orig(e),m0:r,m1:o,l0:a,m3:i,m4:s,m5:c,m6:u,m7:f,m8:d}}));t.$mp.data=Object.assign({},{$root:{l1:n}})},a=[];n.d(e,"b",function(){return o}),n.d(e,"c",function(){return a}),n.d(e,"a",function(){return r})},ac05:function(t,e,n){"use strict";var r=n("ba72"),o=n.n(r);o.a},ba72:function(t,e,n){},d32b:function(t,e,n){"use strict";n.r(e);var r=n("8c9a"),o=n("4385");for(var a in o)"default"!==a&&function(t){n.d(e,t,function(){return o[t]})}(a);n("ac05");var i,s=n("f0c5"),c=Object(s["a"])(o["default"],r["b"],r["c"],!1,null,null,null,!1,r["a"],i);e["default"]=c.exports},f96b:function(t,e,n){"use strict";(function(t){n("dead"),n("921b");r(n("66fd"));var e=r(n("d32b"));function r(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,n("6e42")["createPage"])}},[["f96b","common/runtime","common/vendor"]]]);