(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/My/MyOrder/orderdetail","components/uni-popup/uni-popup"],{"3aac":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i={name:"UniPopup",props:{animation:{type:Boolean,default:!0},type:{type:String,default:"center"},custom:{type:Boolean,default:!1},maskClick:{type:Boolean,default:!0},show:{type:Boolean,default:!0}},data:function(){return{ani:"",showPopup:!1}},watch:{show:function(t){t?this.open():this.close()}},created:function(){},methods:{clear:function(){},open:function(){var t=this;this.$emit("change",{show:!0}),this.showPopup=!0,this.$nextTick(function(){setTimeout(function(){t.ani="uni-"+t.type},30)})},close:function(t){var e=this;!this.maskClick&&t||(this.$emit("change",{show:!1}),this.ani="",this.$nextTick(function(){setTimeout(function(){e.showPopup=!1},300)}))}}};e.default=i},"51de":function(t,e,a){},5306:function(t,e,a){"use strict";a.r(e);var i=a("77e0"),n=a.n(i);for(var o in i)"default"!==o&&function(t){a.d(e,t,function(){return i[t]})}(o);e["default"]=n.a},"5fd6":function(t,e,a){"use strict";var i=a("51de"),n=a.n(i);n.a},"60c0":function(t,e,a){"use strict";a.r(e);var i=a("8dec"),n=a("5306");for(var o in n)"default"!==o&&function(t){a.d(e,t,function(){return n[t]})}(o);a("5fd6");var r,s=a("f0c5"),c=Object(s["a"])(n["default"],i["b"],i["c"],!1,null,"7f2bee2e",null,!1,i["a"],r);e["default"]=c.exports},"683a":function(t,e,a){"use strict";a.r(e);var i=a("3aac"),n=a.n(i);for(var o in i)"default"!==o&&function(t){a.d(e,t,function(){return i[t]})}(o);e["default"]=n.a},7084:function(t,e,a){"use strict";var i=a("79d4"),n=a.n(i);n.a},"77e0":function(t,e,a){"use strict";(function(t,i){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=a("6cba"),o=a("58c8"),r=(s(a("ae8a")),a("c940"));function s(t){return t&&t.__esModule?t:{default:t}}var c={data:function(){return{pageType:1,show1:!1,detailData:{},payFun:[{name:"微信",key:"weixin"},{name:"支付宝",key:"apay"}],payMethod:""}},onLoad:function(t){},onShow:function(){var e=this,a=this.$store.state.orderKey,i=this.$store.getters.isToken;a?i?this.$store.dispatch("detailOrder").then(function(t){e.$refs.loading.close(),200==t.data.code?e.dealRes(t):plus.nativeUI.toast(t.data.msg,{duration:"long"})}):t.navigateTo({url:"../../login/login"}):t.switchTab({url:"../../Home/home"})},onReady:function(){console.log(i(this.$refs.loading," at pages\\My\\MyOrder\\orderdetail.vue:229")),this.$refs.loading.open()},methods:{rightClick:function(){this.showModel()},closePopupsSharClick:function(t){this.payMethod=t.detail.value},cacelBackMoney:function(){},lookWuliu:function(){var e=this.detailData.order_id;t.navigateTo({url:"/pages/My/logistics/logistics?id=".concat(e)})},showModel:function(){var e=this;this.payMethod?"vx"==this.payMethod?(0,o.payorder)(this.detailData.unified_order,"weixin",this.$store.getters.isToken).then(function(a){var n=e.detailData.pay_price;if(200==a.data.code){var o=a.data.data;t.requestPayment({provider:"wxpay",orderInfo:o,success:function(a){if(console.log(i(a," at pages\\My\\MyOrder\\orderdetail.vue:267")),a.channel.serviceReady)if(e.detailData.combination_id||e.detailData.pink_id)t.redirectTo({url:"../../PayOrder/payOrderMessage/payorderMessage"});else{e.$store.commit("setOrderKey",e.detailData.unified_order);var o={real_name:e.detailData.real_name,phone:e.detailData.user_phone,detail:e.detailData.user_address};e.$store.commit("setShoppingAddress",o),t.redirectTo({url:"../../ShopDetails/affirm/success_pay?price=".concat(n)})}}})}}):this.payMethod:t.showToast({title:"请选择支付方式",icon:"none"})},goQueren:function(){var t=this,e=this.detailData.order_id,a=this.token;affirmOrder(e,a).then(function(e){200==e.data.code?(plus.nativeUI.toast("已收货"),t.orderInfo.splice(t.currentClick,1)):plus.nativeUI.toast(e.data.msg)})},copyOrder:function(e){if("p"==e){var a=this.detailData.order_id;t.setClipboardData({data:a})}else{var i=this.detailData.delivery_id;t.setClipboardData({data:i})}},goPingJia:function(e){this.$store.commit("setOrderDetail",e),t.navigateTo({url:"evaluate"})},payNow:function(t){(0,o.payorder)(this.detailData.unified_order,t,this.isToken)},isProduct:function(){},common:function(){},dealTuikuan:function(t){return!(t.combination_id||t.seckill_id||t.bargain_id)&&(1==this.pageType||3==this.pageType||4==this.pageType)},dealRes:function(t){var e=t.data.data;this.pageType=e._status._type,console.log(i(this.pageType," at pages\\My\\MyOrder\\orderdetail.vue:367")),e.cartInfo.forEach(function(t){t.productInfo.attrInfo&&(t.productInfo.attrInfo.image=(0,n.replaceImage)(t.productInfo.attrInfo.image));var e=(0,n.replaceImage)(t.productInfo.image);t.productInfo.image=e}),this.detailData=e},cancelOrder:function(){var e=this;t.showModal({title:"是否取消订单",content:"",success:function(a){a.confirm&&(0,o.cancelOrder)(e.detailData.order_id,e.$store.getters.isToken).then(function(e){200==e.data.code&&(t.showToast({title:"取消订单成功",icon:"none"}),t.navigateTo({url:"myorderss"}))})}})},tuikuan:function(e){e.phone=this.detailData.user_phone;var a=this.detailData.order_id;this.$store.commit("setProductInfo",e),t.navigateTo({url:"refund?id=".concat(a)})},goInfoStore:function(e){var a=e.shop_id;t.navigateTo({url:"../../ShopDetails/StoreDetails/storedetails?id=".concat(a)})},goInfoDetail:function(e,a){if(e.combination_id)this.$store.commit("setcombinId",e.combination_id),t.navigateTo({url:"../../ShopDetails/groubBooking"});else{var i=e.productInfo.id;t.navigateTo({url:"../../ShopDetails/shopDetails?id=".concat(i)})}},goChat:function(){var e=this.detailData.shopInfo,a={expressageFen:e.expressage_score,produceFen:e.product_score,serviceFen:e.service_score,totalFen:e.zong,storeName:e.shop_name,storeLogo:e.shop_logo,storeId:e.shop_id,totalFen2:2};a=JSON.stringify(a),console.log(i(a," at pages\\My\\MyOrder\\orderdetail.vue:448")),t.navigateTo({url:"/pages/ShopDetails/informtion/informtion?shopInfo="+a})},renfundClick:function(){this.cancelOrder()},goWuliu:function(){var e=this.detailData.order_id;t.navigateTo({url:"../logistics/logistics?id=".concat(e)})}},computed:{stateTextLeft:function(){switch(this.pageType){case-1:return"查看退货进度";case 0:return"取消订单";case 1:return"我要退款";case 2:return"查看物流"}},stateTextRight:function(){switch(this.pageType){case-1:return"取消退货";case 0:return"立即付款";case 1:return"提醒发货";case 2:return"确认收货"}},dealAddtime:function(){if(this.detailData._add_time){var t=new Date(1e3*this.detailData._add_time);return(0,r.formatDate)(t,"yyyy-MM-dd hh:mm:ss")}return""}}};e.default=c}).call(this,a("6e42")["default"],a("0de9")["default"])},"79d4":function(t,e,a){},"8dec":function(t,e,a){"use strict";var i,n=function(){var t=this,e=t.$createElement,a=(t._self._c,Object.keys(this.detailData)),i=Object.keys(t.detailData),n=t.__map(t.detailData.cartInfo,function(e,a){var i=t.dealTuikuan(e);return{$orig:t.__get_orig(e),m0:i}}),o=parseInt(t.detailData.coupon_price);t.$mp.data=Object.assign({},{$root:{g0:a,g1:i,l0:n,m1:o}})},o=[];a.d(e,"b",function(){return n}),a.d(e,"c",function(){return o}),a.d(e,"a",function(){return i})},ae8a:function(t,e,a){"use strict";a.r(e);var i=a("c423"),n=a("683a");for(var o in n)"default"!==o&&function(t){a.d(e,t,function(){return n[t]})}(o);a("7084");var r,s=a("f0c5"),c=Object(s["a"])(n["default"],i["b"],i["c"],!1,null,null,null,!1,i["a"],r);e["default"]=c.exports},b465:function(t,e,a){"use strict";(function(t){a("dead"),a("921b");i(a("66fd"));var e=i(a("60c0"));function i(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,a("6e42")["createPage"])},c423:function(t,e,a){"use strict";var i,n=function(){var t=this,e=t.$createElement;t._self._c},o=[];a.d(e,"b",function(){return n}),a.d(e,"c",function(){return o}),a.d(e,"a",function(){return i})}},[["b465","common/runtime","common/vendor"]]]);