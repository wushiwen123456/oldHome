(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/My/MyOrder/orderdetail","components/uni-popup/uni-popup"],{"11ec":function(t,e,a){"use strict";a.r(e);var n=a("6d5d"),i=a("8ffa");for(var o in i)"default"!==o&&function(t){a.d(e,t,function(){return i[t]})}(o);a("3c58");var r=a("2877"),c=Object(r["a"])(i["default"],n["a"],n["b"],!1,null,null,null);e["default"]=c.exports},3660:function(t,e,a){"use strict";(function(t,n){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=a("e443"),o=a("0307"),r=(c(a("11ec")),a("df87"));function c(t){return t&&t.__esModule?t:{default:t}}var u={data:function(){return{pageType:1,detailData:{},payFun:[{name:"微信",key:"weixin"},{name:"支付宝",key:"apay"}],payMethod:""}},onLoad:function(t){},onShow:function(){var e=this,a=this.$store.state.orderKey,n=this.$store.getters.isToken;a?n?this.$store.dispatch("detailOrder").then(function(t){e.dealRes(t)}):t.navigateTo({url:"../../login/login"}):t.switchTab({url:"../../Home/home"})},methods:{rightClick:function(){this.showModel()},closePopupsSharClick:function(t){this.payMethod=t.detail.value},cacelBackMoney:function(){},showModel:function(){var e=this;this.payMethod?"vx"==this.payMethod?(0,i.payorder)(this.detailData.unified_order,"weixin",this.$store.getters.isToken).then(function(a){var i=e.detailData.pay_price;if(200==a.data.code){var o=a.data.data;t.requestPayment({provider:"wxpay",orderInfo:o,success:function(a){if(console.log(n(a," at pages\\My\\MyOrder\\orderdetail.vue:230")),a.channel.serviceReady)if(e.detailData.combination_id||e.detailData.pink_id)t.redirectTo({url:"../../PayOrder/payOrderMessage/payorderMessage"});else{e.$store.commit("setOrderKey",e.detailData.unified_order);var o={real_name:e.detailData.real_name,phone:e.detailData.user_phone,detail:e.detailData.user_address};e.$store.commit("setShoppingAddress",o),t.redirectTo({url:"../../ShopDetails/affirm/success_pay?price=".concat(i)})}}})}}):this.payMethod:t.showToast({title:"请选择支付方式",icon:"none"})},copyOrder:function(e){if("p"==e){var a=this.detailData.order_id;t.setClipboardData({data:a})}},payNow:function(t){(0,i.payorder)(this.detailData.unified_order,t,this.isToken)},isProduct:function(){},common:function(){},dealRes:function(t){var e=t.data.data;this.pageType=e._status._type,e.cartInfo.forEach(function(t){t.productInfo.attrInfo&&(t.productInfo.attrInfo.image=(0,o.replaceImage)(t.productInfo.attrInfo.image));var e=(0,o.replaceImage)(t.productInfo.image);t.productInfo.image=e}),this.detailData=e},cancelOrder:function(){var e=this;t.showModal({title:"是否取消订单",content:"",success:function(a){a.confirm&&(0,i.cancelOrder)(e.detailData.order_id,e.$store.getters.isToken).then(function(e){200==e.data.code&&(t.showToast({title:"取消订单成功",icon:"none"}),t.navigateTo({url:"myorderss"}))})}})},tuikuan:function(e){e.phone=this.detailData.user_phone,this.$store.commit("setProductInfo",e),t.navigateTo({url:"refund"})},goInfoStore:function(e){var a=e.shop_id;t.navigateTo({url:"../../ShopDetails/StoreDetails/storedetails?id=".concat(a)})},goInfoDetail:function(e,a){var n=e.productInfo.id;t.navigateTo({url:"../../ShopDetails/shopDetails?id=".concat(n)})},renfundClick:function(){this.cancelOrder()}},computed:{stateTextLeft:function(){switch(this.pageType){case-1:return"查看退货进度";case 0:return"取消订单";case 1:return"我要退款";case 2:return"查看物流"}},stateTextRight:function(){switch(this.pageType){case-1:return"取消退货";case 0:return"立即付款";case 1:return"提醒发货";case 2:return"确认收货"}},dealAddtime:function(){if(this.detailData._add_time){var t=new Date(1e3*this.detailData._add_time);return(0,r.formatDate)(t,"yyyy-MM-dd hh:mm:ss")}return""}}};e.default=u}).call(this,a("6e42")["default"],a("0de9")["default"])},"3c58":function(t,e,a){"use strict";var n=a("4a86"),i=a.n(n);i.a},"4a86":function(t,e,a){},"58c2":function(t,e,a){},"62c6":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=(t._self._c,Object.keys(this.detailData)),n=Object.keys(t.detailData),i=parseInt(t.detailData.coupon_price);t.$mp.data=Object.assign({},{$root:{g0:a,g1:n,m0:i}})},i=[];a.d(e,"a",function(){return n}),a.d(e,"b",function(){return i})},"6d5d":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement;t._self._c},i=[];a.d(e,"a",function(){return n}),a.d(e,"b",function(){return i})},7632:function(t,e,a){"use strict";var n=a("58c2"),i=a.n(n);i.a},"8fe5":function(t,e,a){"use strict";(function(t){a("20d5"),a("921b");n(a("66fd"));var e=n(a("cf94"));function n(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,a("6e42")["createPage"])},"8ffa":function(t,e,a){"use strict";a.r(e);var n=a("fe90"),i=a.n(n);for(var o in n)"default"!==o&&function(t){a.d(e,t,function(){return n[t]})}(o);e["default"]=i.a},b085:function(t,e,a){"use strict";a.r(e);var n=a("3660"),i=a.n(n);for(var o in n)"default"!==o&&function(t){a.d(e,t,function(){return n[t]})}(o);e["default"]=i.a},cf94:function(t,e,a){"use strict";a.r(e);var n=a("62c6"),i=a("b085");for(var o in i)"default"!==o&&function(t){a.d(e,t,function(){return i[t]})}(o);a("7632");var r=a("2877"),c=Object(r["a"])(i["default"],n["a"],n["b"],!1,null,null,null);e["default"]=c.exports},fe90:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n={name:"UniPopup",props:{animation:{type:Boolean,default:!0},type:{type:String,default:"center"},custom:{type:Boolean,default:!1},maskClick:{type:Boolean,default:!0},show:{type:Boolean,default:!0}},data:function(){return{ani:"",showPopup:!1}},watch:{show:function(t){t?this.open():this.close()}},created:function(){},methods:{clear:function(){},open:function(){var t=this;this.$emit("change",{show:!0}),this.showPopup=!0,this.$nextTick(function(){setTimeout(function(){t.ani="uni-"+t.type},30)})},close:function(t){var e=this;!this.maskClick&&t||(this.$emit("change",{show:!1}),this.ani="",this.$nextTick(function(){setTimeout(function(){e.showPopup=!1},300)}))}}};e.default=n}},[["8fe5","common/runtime","common/vendor"]]]);