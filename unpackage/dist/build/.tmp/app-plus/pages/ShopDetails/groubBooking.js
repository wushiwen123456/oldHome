(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/ShopDetails/groubBooking"],{"1a56":function(e,t,o){"use strict";(function(e){o("dead"),o("921b");i(o("66fd"));var t=i(o("ef7a"));function i(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,o("6e42")["createPage"])},"2a1d":function(e,t,o){"use strict";(function(e,i){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,a,s=o("4ff4"),c=o("6cba"),u=f(o("8f99")),r=o("3dc2"),l=o("d383");function f(e){return e&&e.__esModule?e:{default:e}}function p(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{},i=Object.keys(o);"function"===typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(o).filter(function(e){return Object.getOwnPropertyDescriptor(o,e).enumerable}))),i.forEach(function(t){h(e,t,o[t])})}return e}function h(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}var d=function(){return o.e("components/numberbox/numberbox").then(o.bind(null,"cee3"))},g=function(){return o.e("components/uni-popup/uni-popup").then(o.bind(null,"ae8a"))},m=function(){return o.e("components/countdown/countdown").then(o.bind(null,"ceca"))},k=function(){return o.e("components/rate/rate").then(o.bind(null,"5ab0"))},b=function(){return Promise.all([o.e("common/vendor"),o.e("components/jyf-Parser/index")]).then(o.bind(null,"e407"))},v={components:{uniPopup:g,tuiNumberbox:d,tuiCountdown:m,tuiRate:k,parser:b},onLoad:function(){if(a=this,!this.$store.getters.isToken)return e.showModal({title:"请先去登录再来查看",success:function(t){t.confirm?e.navigateTo({url:"../login/login"}):e.navigateTo({url:"../Home/home"})}}),!1;if(this.$store.state.combinId){var t=this.$store.state.combinId,o=this.$store.getters.isToken;this.getPinkDetail(t,o)}else e.switchTab({url:"../Home/home"})},onShow:function(){this.pinkInfo={},this.isPink=!1},data:function(){return{payimgType:!0,timeList:[1e3,2e3,3e3,19,24e4],swiperNum:0,videoUrl:"",swiperList:[],selectimg:[],list:[],value:1,detailData:{},autoplay:!1,pinkInfo:{},uniqueType:"",isPink:!1,commont:{},msg:[]}},onBackPress:function(){},onUnload:function(){e.$off("videoDetail")},onReady:function(){this.$refs.loading.open()},methods:(n={showAllTuan:function(){this.$refs.booking.open()},getPinkDetail:function(e,t){var o=this;(0,s.getPinkDetail)(e,t).then(function(e){if(o.$refs.loading.close(),200==e.data.code){var t=e.data.data;t.recommend_goods.forEach(function(e){e.image=(0,c.replaceImage)(e.image)}),t.storeInfo.image=(0,c.replaceImage)(t.storeInfo.image),t.storeInfo.images=t.storeInfo.images.map(function(e){return(0,c.replaceImage)(e)}),t.storeInfo.video=(0,c.replaceImage)(t.storeInfo.video),o.videoUrl=t.storeInfo.video,o.dealSwiper(t),t.productValue&&o.dealProductValue(t),t.pink.length&&o.detalPink(t.pink);var i=t.reply;o.dealCommont(i),o.msg=t.pink_ok_list,o.detailData=p({},t)}})},dealSwiper:function(e){this.swiperList=e.storeInfo.images.map(function(e,t){return{url:e,id:t,type:"image"}})},detalPink:function(e){var t=this;e.forEach(function(e){t.$set(e,"avatar","http://"+r.HOST+e.avatar),t.$set(e,"time",t.dealTime(e))})},dealCommont:function(e){if(e){var t=e.pics.map(function(e){return(0,c.replaceImage)(e)});e.pics=t,e.avatar=(0,c.replaceImage)(e.avatar),this.commont=e}},dealProductValue:function(e){var t=e.productValue,o=Object.keys(t);o.forEach(function(e,o){var i=(0,c.replaceImage)(t[e].image);t[e].image=i})},openImage:function(){var e=this.uniqueType?this.uniqueType.price:this.detailData.storeInfo.price;e&&plus.nativeUI.previewImage([e])},selectShopClick:function(e,t,o){if(e.check)return e.check=!1,void(this.uniqueType="");o.attr_value.forEach(function(e){e.check=!1}),e.check=!0;var n=[];this.detailData.productAttr.forEach(function(e){e.attr_value.forEach(function(e){e.check&&n.push(e.attr)})}),console.log(i(n," at pages\\ShopDetails\\groubBooking.vue:540")),(n.length=this.detailData.productAttr.length)&&(this.uniqueType=this.detailData.productValue[n.join(",")])},selectimageClick:function(){0==this.swiperNum&&(this.payimgType=!1,this.ZhanTing())},selectPlayClick:function(){0!=this.swiperNum&&(this.payimgType=!0,this.BoFang())}},h(n,"openImage",function(){var e=this.uniqueType?this.uniqueType.image:this.detailData.storeInfo.image;e&&plus.nativeUI.previewImage([e])}),h(n,"swiperChange",function(e){this.swiperNum=e.target.current}),h(n,"serviceClick",function(t){var o=this.detailData.shop_info,i=JSON.stringify(o);e.navigateTo({url:"informtion/informtion?shopInfo="+i})}),h(n,"change",function(e){this.value=e.value}),h(n,"chooseImg",function(){}),h(n,"nowBuyClick",function(){var t=this;if(0==Object.keys(this.detailData.productValue).length||""!=this.uniqueType){var o=this.detailData,i={productId:o.storeInfo.id,cartNum:this.value,uniqueId:this.uniqueType?this.uniqueType.unique:"",combinationId:o.storeInfo.id,secKillId:"",bargainId:"",shop_id:o.storeInfo.shop_id};this.$store.dispatch("Pay",i).then(function(o){200==o.data.code?(t.$store.commit("keepCartId",o.data.data.cartId),t.isPink?t.$store.commit("setPinkId",t.pinkInfo):t.$store.commit("setOutPinkInfo"),t.$refs.bookingsingle.close(),t.$refs.popupbottom.close(),e.navigateTo({url:"affirm/affirmOrder"})):e.showToast({title:o.data.msg,icon:"none"})})}else e.showToast({title:"请选择商品种类",icon:"none"})}),h(n,"joinPintuan",function(){this.isPink=!0,0!=Object.keys(this.detailData.productValue).length&&""!=this.uniqueType?this.nowBuyClick():(this.$refs.popupbottom.open(),this.$refs.bookingsingle.close())}),h(n,"openSingle",function(e){this.pinkInfo=e,this.$refs.booking.close(),this.$refs.bookingsingle.open()}),h(n,"collectClick",function(){this.detailData.storeInfo.userCollect=!this.detailData.storeInfo.userCollect;var e={id:this.detailData.storeInfo.id,category:"pink_product"};this.detailData.storeInfo.userCollect?this.$store.dispatch("collect",e).then(function(e){e.data.code}):this.$store.dispatch("unCollect",e).then(function(e){console.log(i(e," at pages\\ShopDetails\\groubBooking.vue:668")),e.data.code})}),h(n,"shopClick",function(t){e.navigateTo({url:"StoreDetails/storedetails?id="+this.detailData.storeInfo.shop_id})}),h(n,"outloginClick",function(){this.$refs.popups.open()}),h(n,"closePopupsClick",function(){this.$refs.popups.close()}),h(n,"outloginSharClick",function(){var t=this,o=this,n=o.detailData.storeInfo.title,a={href:"http://jn.51kdd.com/index.html#/?href=oldHome://abc",title:"老家商城",desc:"我正在老家商城购买"+n+",快来和我一起选购吧",imgUrl:o.detailData.storeInfo.image},s=[{icon:"/static/sharemenu/wechatfriend.png",text:"微信好友"},{icon:"/static/sharemenu/wechatmoments.png",text:"朋友圈"},{icon:"/static/sharemenu/copyurl.png",text:"复制"},{icon:"/static/sharemenu/more.png",text:"更多"}];this.shareObj=(0,u.default)(a,s,function(t){console.log(i("点击按钮的序号: "+t," at pages\\ShopDetails\\groubBooking.vue:717"));var o={href:a.href||"",title:a.title||"",summary:a.desc||"",success:function(e){console.log(i("success:"+JSON.stringify(e)," at pages\\ShopDetails\\groubBooking.vue:723"))},fail:function(e){console.log(i("fail:"+JSON.stringify(e)," at pages\\ShopDetails\\groubBooking.vue:726"))}};switch(t){case 0:o.provider="weixin",o.scene="WXSceneSession",o.type=0,o.imageUrl=a.imgUrl||"",e.share(o);break;case 1:o.provider="weixin",o.scene="WXSenceTimeline",o.type=0,o.imageUrl=a.imgUrl||"",e.share(o);break;case 2:e.setClipboardData({data:a.href,complete:function(){e.showToast({title:"已复制到剪贴板"})}});break;case 3:plus.share.sendWithSystem({type:"web",title:a.title||"",thumbs:[a.imgUrl||""],href:a.href||"",content:a.desc||""});break}}),this.$nextTick(function(){t.shareObj.alphaBg.show(),t.shareObj.shareMenu.show()})}),h(n,"closePopupsSharClick",function(){this.$refs.popup.close()}),h(n,"outloginShopClick",function(){this.$refs.popupbottom.open()}),h(n,"closePopupsShopClick",function(){this.$refs.popupbottom.close()}),h(n,"outloginbookingClick",function(){this.detailData.pindAll.length?this.$refs.booking.open():this.$refs.popupbottom.open()}),h(n,"closePopupsbookingClick",function(){this.$refs.booking.close()}),h(n,"outloginbookingsingleClick",function(){this.$refs.bookingsingle.open()}),h(n,"closePopupsbookingsingleClick",function(){this.$refs.bookingsingle.close()}),h(n,"chooseClose",function(){this.$refs.popupbottom.close()}),h(n,"BoFang",function(){if(0==a.autoplay){e.$emit("videoDetail",{video:this.videoUrl});var t=e.getSubNVueById("video_mask_booking");console.log(i(t," at pages\\ShopDetails\\groubBooking.vue:818")),t.show("fade-in",300,function(){console.log(i("打开成功"," at pages\\ShopDetails\\groubBooking.vue:820"))})}}),h(n,"ZhanTing",function(){1==a.autoplay&&(a.autoplay=!1)}),h(n,"recommendClick",function(t){e.navigateTo({url:"shopDetails?id=".concat(t.id)})}),h(n,"shareShowClick",function(t,o){"微信好友"==t.name&&e.share({provider:"weixin",scene:"WXSceneSession",type:0,href:"https://baidu.com",title:"老家商城分享",summary:"我正在使用老家商城购物，赶紧跟我一起来体验！",imageUrl:"../../../static/demo5.png",success:function(e){console.log(i("success:"+JSON.stringify(e)," at pages\\ShopDetails\\groubBooking.vue:846"))},fail:function(e){console.log(i("fail:"+JSON.stringify(e)," at pages\\ShopDetails\\groubBooking.vue:849"))}})}),h(n,"dealTime",function(e){var t=e.h,o=e.i,i=e.s;return 60*t*60+60*o+1*i}),h(n,"swiperDetail",function(){var e=this.swiperList;e=e.map(function(e){return e.url}),console.log(i(e," at pages\\ShopDetails\\groubBooking.vue:862")),plus.nativeUI.previewImage(e)}),h(n,"sharkPink",function(e){this.joinPintuan()}),h(n,"popupChoose",function(){return Object.keys(this.detailData.productValue).length?"已选择："+(this.uniqueType?this.uniqueType.suk:""):"默认种类"}),h(n,"goPink",function(){if(this.detailData.pink.length){if(0!=Object.keys(this.detailData.productValue).length&&""==this.uniqueType)return void e.showToast({title:"请选择商品种类",icon:"none"});Object.keys(this.pinkInfo).length?(this.isPink=!0,this.nowBuyClick()):this.$refs.booking.open()}else e.showToast({title:"还没有人发起拼团哦~",icon:"none"})}),h(n,"goDetail",function(e){(0,l.clickDetail)(e)}),h(n,"goKaituan",function(){this.isPink=!1,this.nowBuyClick()}),h(n,"goMoreCommont",function(){var t=this.detailData.storeInfo.product_id;e.navigateTo({url:"shopComment?id=".concat(t)})}),h(n,"tanchuPin",function(){this.detailData.pink.length?this.outloginShopClick():e.showToast({title:"还没有人发起拼团哦~",icon:"none"})}),n)};t.default=v}).call(this,o("6e42")["default"],o("0de9")["default"])},"2f14":function(e,t,o){"use strict";o.r(t);var i=o("2a1d"),n=o.n(i);for(var a in i)"default"!==a&&function(e){o.d(t,e,function(){return i[e]})}(a);t["default"]=n.a},"6fab":function(e,t,o){},b47c:function(e,t,o){"use strict";var i=o("6fab"),n=o.n(i);n.a},dfa8:function(e,t,o){"use strict";var i,n=function(){var e=this,t=e.$createElement,o=(e._self._c,Object.keys(e.detailData)),i=Object.keys(e.detailData.productValue),n=Object.keys(e.commont),a=Object.keys(e.commont),s=Object.keys(e.commont),c=e.popupChoose(),u=Object.keys(e.detailData);e.$mp.data=Object.assign({},{$root:{g0:o,g1:i,g2:n,g3:a,g4:s,m0:c,g5:u}})},a=[];o.d(t,"b",function(){return n}),o.d(t,"c",function(){return a}),o.d(t,"a",function(){return i})},ef7a:function(e,t,o){"use strict";o.r(t);var i=o("dfa8"),n=o("2f14");for(var a in n)"default"!==a&&function(e){o.d(t,e,function(){return n[e]})}(a);o("b47c");var s,c=o("f0c5"),u=Object(c["a"])(n["default"],i["b"],i["c"],!1,null,null,null,!1,i["a"],s);t["default"]=u.exports}},[["1a56","common/runtime","common/vendor"]]]);