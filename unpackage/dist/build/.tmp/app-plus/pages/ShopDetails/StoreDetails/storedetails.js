(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/ShopDetails/StoreDetails/storedetails"],{2778:function(e,t,n){"use strict";n.r(t);var i=n("6c4e"),o=n.n(i);for(var s in i)"default"!==s&&function(e){n.d(t,e,function(){return i[e]})}(s);t["default"]=o.a},"6c4e":function(e,t,n){"use strict";(function(e,i){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n("2799"),s=n("f607"),r=n("2f62"),a=n("6cba");function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),i.forEach(function(t){l(e,t,n[t])})}return e}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var u=function(){return n.e("components/uni-load-more/uni-load-more").then(n.bind(null,"69a6"))},h=function(){return n.e("components/rate/rate").then(n.bind(null,"5ab0"))},d=function(){return Promise.all([n.e("common/vendor"),n.e("components/mescroll-uni/mescroll-uni")]).then(n.bind(null,"8e95"))},f={components:{uniLoadMore:u,MescrollUni:d,tuiRate:h},data:function(){return{statusBarHeight:0,loadingimg:!0,loadingType:1,currentTab:0,shopselect:0,priceType:!0,isCollectIng:!1,storeId:"",storeInfo:{},tabs2:[{name:"今日特拼"},{name:"全部"},{name:"新品"},{name:"新品"}],productList:[],isDesc:!1,isSales:!1,downOption:{use:!0,auto:!0},upOption:{use:!0,auto:!0,page:{num:0,size:10},noMoreSize:5,textNoMore:"-- 没有更多了 --",empty:{tip:"暂无相关数据"}},hasNext:!0,searchP:""}},onLoad:function(t){var n=this;if(e.getSystemInfo({success:function(e){n.statusBarHeight=e.statusBarHeight}}),!t.id||!n.isToken)return e.switchTab({url:"../../Home/home"}),!1;n.storeId=t.id,n.getStoreInfo(n.storeId,n.isToken)},onReady:function(){this.$refs.loading.open()},methods:{getStoreInfo:function(e,t){var n=this;(0,o.getStoreInfo)(e,t).then(function(e){n.$refs.loading.close(),200==e.data.code&&(n.isCollectIng=e.data.data.user_collect,n.storeInfo=e.data.data)})},collectStore:function(){this.isCollectIng=!this.isCollectIng,this.isCollectIng?(0,o.collectStoring)(this.storeId,this.isToken).then(function(e){e.data.code}):(0,o.unCollectStore)(this.storeId,this.isToken).then(function(e){e.data.code})},HomeClick:function(){if(0!=this.currentTab){this.currentTab=0;var e=this.$refs.mescroll.mescroll;e.resetUpScroll()}},shopClick:function(){if(1!=this.currentTab){this.currentTab=1;var e=this.$refs.mescroll.mescroll;e.resetUpScroll()}},activtyClick:function(){this.isSales=!this.isSales,this.currentTab=2;var e=this.$refs.mescroll.mescroll;e.resetUpScroll()},newShopClick:function(){this.isDesc=!this.isDesc,this.currentTab=3;var e=this.$refs.mescroll.mescroll;e.resetUpScroll()},syndClick:function(){0!=this.shopselect&&(this.shopselect=0,this.dealClick())},salesClick:function(){1!=this.shopselect&&(this.shopselect=1,this.dealClick())},priceClick:function(){this.shopselect=2,this.priceType?(this.priceType=!1,this.dealClick()):(this.priceType=!0,this.dealClick())},px:function(t){return e.upx2px(t)+"px"},searchClick:function(){var e=this.$refs.mescroll.mescroll;e.resetUpScroll()},detail:function(t){e.navigateTo({url:"../shopDetails?id=".concat(t.id)})},dealData:function(e,t,n,o){var s=e.data.data;s.length&&s.forEach(function(e,t){e.image=(0,a.replaceImage)(e.image)}),s.length<n?this.hasNext=!1:this.hasNext=!0,console.log(i(t," at pages\\ShopDetails\\StoreDetails\\storedetails.vue:319")),1==t&&(this.productList=[]),this.productList=this.productList.concat(s),o.endSuccess(s.length,this.hasNext)},dealClick:function(e,t,n){var i=this;1!=this.currentTab?(0,s.getDetailData)({shop_id:this.storeId,salesOrder:2==this.currentTab?this.isSales?"desc":"asc":"",priceOrder:3==this.currentTab?this.isDesc?"desc":"asc":"",page:e,limit:t,keyword:this.searchP}).then(function(o){i.searchP="",i.isLoading=!1,i.dealData(o,e,t,n)}):(0,s.getDetailData)({shop_id:this.storeId,salesOrder:"desc",priceOrder:"desc",is_hot:1,page:e,limit:t,keyword:this.searchP}).then(function(o){i.searchP="",i.isLoading=!1,i.dealData(o,e,t,n)})},getTabDetail:function(e){},dealTechan:function(e){return e.province.replace(/(['省''市'('自治区')])/g,"")},downCallback:function(e){e.resetUpScroll()},upCallback:function(e){var t=e.num,n=e.size;this.dealClick(t,n,e)}},computed:c({},(0,r.mapGetters)(["isToken"]),{collected:function(){return this.isCollectIng?"已收藏":"收藏"},dealImage:function(){return this.storeInfo.shop_info?(0,a.replaceImage)(this.storeInfo.shop_info.shop_logo):""}})};t.default=f}).call(this,n("6e42")["default"],n("0de9")["default"])},"86a0":function(e,t,n){"use strict";(function(e){n("dead"),n("921b");i(n("66fd"));var t=i(n("d316"));function i(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,n("6e42")["createPage"])},a7c5:function(e,t,n){"use strict";var i=function(){var e=this,t=e.$createElement,n=(e._self._c,e.__map(e.productList,function(t,n){var i=e.dealTechan(t);return{$orig:e.__get_orig(t),m0:i}})),i=e.__map(e.productList,function(t,n){var i=e.dealTechan(t);return{$orig:e.__get_orig(t),m1:i}});e.$mp.data=Object.assign({},{$root:{l0:n,l1:i}})},o=[];n.d(t,"a",function(){return i}),n.d(t,"b",function(){return o})},b6b4:function(e,t,n){"use strict";var i=n("fa57"),o=n.n(i);o.a},d316:function(e,t,n){"use strict";n.r(t);var i=n("a7c5"),o=n("2778");for(var s in o)"default"!==s&&function(e){n.d(t,e,function(){return o[e]})}(s);n("b6b4");var r=n("2877"),a=Object(r["a"])(o["default"],i["a"],i["b"],!1,null,null,null);t["default"]=a.exports},fa57:function(e,t,n){}},[["86a0","common/runtime","common/vendor"]]]);