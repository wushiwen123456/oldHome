(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["common/main"],{"3de3":function(e,t,o){},"4c39":function(e,t,o){"use strict";(function(e,a){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=o("e875"),r=o("6eb0"),l=p(o("f0bd")),c=o("a71b"),s=o("0ef8"),u=o("6cba"),i=o("07b8"),f=p(o("66fd"));function p(e){return e&&e.__esModule?e:{default:e}}var d={data:function(){return{localVersion:""}},onLaunch:function(){var t=this,o=e.getStorageSync("userData");if(o){var n=o.saveTime,r=(0,l.default)(n);if(r){var s={phone:o.username,pwd:o.password};(0,c.login)(s).then(function(o){if(200==o.data.code){console.log(a("异步登录成功"," at App.vue:43"));var n=o.data.data.token,r=(new Date).getTime();e.setStorage({key:"userData",data:{token:n,username:s.phone,password:s.pwd,saveTime:r}}),t.$store.commit("login",n),t.saveProfile(n),t.getUserChatMessages(n)}else plus.nativeUI.toast("很久没来啦，从新登录下吧~",{duration:"long"}),console.log(a("异步登录失败，请重新登陆"," at App.vue:68")),e.reLaunch({url:"pages/login/login"})})}else plus.nativeUI.toast("登录已失效，请重新登录",{duration:"long"}),console.log(a("缓存时间已超时，请登录"," at App.vue:79")),e.removeStorage({key:"Message_key"}),e.reLaunch({url:"pages/login/login"})}else e.removeStorage({key:"Message_key"}),e.reLaunch({url:"pages/login/login"});this.getVersion(),this.monitorMessages(),e.getSystemInfo({success:function(e){f.default.prototype.StatusBar=e.statusBarHeight,"android"==e.platform?f.default.prototype.CustomBar=e.statusBarHeight+50:f.default.prototype.CustomBar=e.statusBarHeight+45}}),f.default.prototype.ColorList=[{title:"嫣红",name:"red",color:"#e54d42"},{title:"桔橙",name:"orange",color:"#f37b1d"},{title:"明黄",name:"yellow",color:"#fbbd08"},{title:"橄榄",name:"olive",color:"#8dc63f"},{title:"森绿",name:"green",color:"#39b54a"},{title:"天青",name:"cyan",color:"#1cbbb4"},{title:"海蓝",name:"blue",color:"#0081ff"},{title:"姹紫",name:"purple",color:"#6739b6"},{title:"木槿",name:"mauve",color:"#9c26b0"},{title:"桃粉",name:"pink",color:"#e03997"},{title:"棕褐",name:"brown",color:"#a5673f"},{title:"玄灰",name:"grey",color:"#8799a3"},{title:"草灰",name:"gray",color:"#aaaaaa"},{title:"墨黑",name:"black",color:"#333333"},{title:"雅白",name:"white",color:"#ffffff"}]},onHide:function(){console.log(a("App Hide"," at App.vue:212"))},onShow:function(){var e=plus.runtime.arguments;e&&console.log(a(e," at App.vue:219"))},methods:{getVersion:function(){(0,n.getVersion)()},saveProfile:function(t){var o=this;(0,s.getProfileData)(t).then(function(t){if(200==t.data.code){var n=t.data.data;n.avatar=(0,u.replaceImage)(n.avatar),e.setStorage({key:"Message_key",data:n,success:function(e){console.log(a("个人信息写入缓存成功"," at App.vue:240"))}});var r=e.getStorageSync("integrlUrl");r?e.getSavedFileInfo({filePath:r,success:function(e){e.size&&(console.log(a("本地头像路径获取成功"," at App.vue:253")),o.$store.commit("setLocalAvatar",r),console.log(a(o.$store.state.userInfo.localAvatar," at App.vue:255")))},fail:function(e){(0,i.saveAvatar)(n.avatar).then(function(e){o.$store.commit("setLocalAvatar",e)}).catch(function(e){console.log(a("本地头像保存失败"," at App.vue:264"))})}}):(0,i.saveAvatar)(n.avatar).then(function(e){o.$store.commit("setLocalAvatar",e)}).catch(function(e){console.log(a("本地头像保存失败"," at App.vue:275"))}),o.$store.commit("setUserData",n),console.log(a(n," at App.vue:282"))}})},getUserChatMessages:function(e){var t=this;this.$store.dispatch("getUserChatList",e).then(function(e){var o=(0,r.charCompare)(e);t.$store.commit("setUserChatMessages",o),console.log(a("获取聊天记录成功，返回合并后的聊天记录"," at App.vue:295")),console.log(a(t.$store.state.userChatMessages," at App.vue:296"))}).catch(function(e){switch(e){case"1":(0,r.noNetWork)();break}})},monitorMessages:function(){var t=this;console.log(a("开始监听消息"," at App.vue:310")),e.$on("getMessage",function(e){console.log(a("消息监听成功，已发送至vuex存储"," at App.vue:312")),t.$store.commit("dealSocketMessage",e)})}}};t.default=d}).call(this,o("6e42")["default"],o("0de9")["default"])},"76d6":function(e,t,o){"use strict";(function(e){o("dead"),o("921b");var t=r(o("66fd")),a=r(o("b708")),n=r(o("b32d"));function r(e){return e&&e.__esModule?e:{default:e}}function l(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{},a=Object.keys(o);"function"===typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(o).filter(function(e){return Object.getOwnPropertyDescriptor(o,e).enumerable}))),a.forEach(function(t){c(e,t,o[t])})}return e}function c(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}t.default.config.productionTip=!1;var s=function(){return o.e("colorui/components/cu-custom").then(o.bind(null,"8a62"))};t.default.component("cu-custom",s);var u=function(){return o.e("components/x-modal/x-modal").then(o.bind(null,"f3c0"))};t.default.component("x-modal",u);var i=function(){return o.e("components/loding/w-loading").then(o.bind(null,"a754"))};t.default.component("x-loading",i),a.default.mpType="app";var f=new t.default(l({},a.default,{store:n.default}));e(f).$mount()}).call(this,o("6e42")["createApp"])},"7b26":function(e,t,o){"use strict";o.r(t);var a=o("4c39"),n=o.n(a);for(var r in a)"default"!==r&&function(e){o.d(t,e,function(){return a[e]})}(r);t["default"]=n.a},b708:function(e,t,o){"use strict";o.r(t);var a=o("7b26");for(var n in a)"default"!==n&&function(e){o.d(t,e,function(){return a[e]})}(n);o("bbac");var r,l,c,s,u=o("f0c5"),i=Object(u["a"])(a["default"],r,l,!1,null,null,null,!1,c,s);t["default"]=i.exports},bbac:function(e,t,o){"use strict";var a=o("3de3"),n=o.n(a);n.a}},[["76d6","common/runtime","common/vendor"]]]);